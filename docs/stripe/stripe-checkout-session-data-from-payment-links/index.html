<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Stripe Checkout Session Data From Payment Links</title>
  <meta name="author" content="" />

  
  <meta name="keywords" content="business intelligence experts attribution modelling google analytics conversion tracking crm tracking leads adwords ppc tracking">	
  

  
  <meta name="description" content="Track attribution data for Stripe Payment Links by retrieving Stripe Checkout Session data to thank you redirect">
  

  <meta name="generator" content="Hugo 0.58.3" />
  
  
<script>var dataLayer = window.dataLayer = window.dataLayer || [];</script>



<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WXK2VG6');</script>


  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">

  
  <link href="/css/animate.css" rel="stylesheet">

  
  
    <link href="/css/style.default.css" rel="stylesheet" id="theme-stylesheet">
  


  
  <link href="/css/custom.css" rel="stylesheet">

  
    

  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />
  

  <link href="/css/owl.carousel.css" rel="stylesheet">
  <link href="/css/owl.theme.css" rel="stylesheet">

  <link rel="alternate" href="https://attribut.io/index.xml" type="application/rss+xml" title="Attributio | Business Intelligence &amp; Analytics Experts">

  
  <meta property="og:title" content="Stripe Checkout Session Data From Payment Links" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/docs/stripe/stripe-checkout-session-data-from-payment-links//" />

  
    <meta property="og:image" content="img/attributio-logo-300.png" />
  
</head>


  <body>

    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXK2VG6"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    
    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/">
                    <img src="/img/attributio-logo-300.png" alt="Stripe Checkout Session Data From Payment Links logo" width="162" height="45" style="padding-top:3px;" class="hidden-xs hidden-sm">
                    <img src="/img/attributio-logo-300.png" alt="Stripe Checkout Session Data From Payment Links logo" width="135" height="40" style="padding-top:5px;" class="visible-xs visible-sm">
                    <span class="sr-only">Stripe Checkout Session Data From Payment Links - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  <li class="dropdown">
                    
                    <a href="/meet/"
                        class="track"
                        data-event-category="Homepage"
                        data-event-action="Navigation Click"
                        data-event-label="Teal Link"
                    >Meet</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/docs/"
                        class="track"
                        data-event-category="Homepage"
                        data-event-action="Navigation Click"
                        data-event-label="Teal Link"
                    >Docs</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/blog/"
                        class="track"
                        data-event-category="Homepage"
                        data-event-action="Navigation Click"
                        data-event-label="Teal Link"
                    >Blog</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Stripe Checkout Session Data From Payment Links</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">
                    <div class="col-md-3">
                        <div class="d-none d-xl-block col-xl-2 bd-toc">
                            <ul class="section-nav" data-spy="affix" data-offset-top="100" data-offset-bottom="150">
                            
                            
                                <li class="toc-entry toc-h2"><a href="https://attribut.io/docs/stripe/stripe-checkout-session-data-from-payment-links/#introduction">Introduction</a></li>
                            
                                <li class="toc-entry toc-h2"><a href="https://attribut.io/docs/stripe/stripe-checkout-session-data-from-payment-links/#redirect">Redirect</a></li>
                            
                                <li class="toc-entry toc-h2"><a href="https://attribut.io/docs/stripe/stripe-checkout-session-data-from-payment-links/#api-key">Api key</a></li>
                            
                                <li class="toc-entry toc-h2"><a href="https://attribut.io/docs/stripe/stripe-checkout-session-data-from-payment-links/#get-data">Get data</a></li>
                            
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-9" id="blog-post">

                        <div id="post-content">
                          

<h2 id="introduction">Stripe Checkout Session Data from Stripe Payment Links</h2>

<p>Stripe continues to make transactions easier for anyone that wants to collect payments online. Anyone that signs up with Stripe can create a product and payment link and Stripe will handle the entire checkout process. This makes it fast and easy to start collecting payments by embedding payment links on your website, emails, or even SMS!</p>

<p>That&rsquo;s great for simple invoices where you know your customer but for marketers and entrepreneurs that want to quickly create a product and payment link and run marketing campaigns to gain traction need a little help with conversion tracking.</p>

<p>That&rsquo;s because by default, most tracking pixels like Google Analytics or affiliate programs requires a tag to be added on the site of origin when a conversion occurs with some information about the customer. The problem with Stripe Payment Links is that although you can redirect customers, the only data you can send back is the CHECKOUT_SESSION_ID. Ususally, analytics tools requries additional data like an email or transaction data to measure ROAS and attribution.</p>

<p>That&rsquo;s why we created <a href="https://stripe.attribut.io" target="_blank">a simple tool to help you get data from Stripe</a> with the CHECKOUT_SESSION_ID once you are redirected back to your thank you page.</p>

<h2 id="redirect">Redirect and Pass CHECKOUT_SESSION_ID to Thank You Page</h2>

<p>We&rsquo;re going to assume that you aleady know how to how to create Products and Payments in Stripe.</p>

<p>The first thing you will need to do is to add the CHECKOUT_SESSION_ID parameter to your redirect link. You can <a href="https://stripe.com/docs/payments/payment-links#change-confirmation-behavior" target="_blank">read the docs for sending the CHECKOUT_SESSION_ID here</a>.</p>

<p><img class="img-responsive img-thumbnail" src="/img/docs/stripe/stripe-confirmation-page-checkout-session-id.png" alt="add stripe checkout session id to confirmation redirect payment links" /></p>

<h2 id="api-key">Create Checkout Sessions API KEY</h2>

<p>Now we need to create an api key exclusively for checkout sessions in Stripe and only provide read access. We do this to limit access to other sensitive data.</p>

<p><img class="img-responsive img-thumbnail" src="/img/docs/stripe/create-stripe-checkout-sessions-api-key.png" alt="create stripe checkout sessions api key" /></p>

<p>Now we can use this <a href="https://stripe.attribut.io" target="_blank">app to use CHECKOUT_SESSION_ID and api key to get data from stripe</a> in the checkout.session.completed event.</p>

<p>Once you create an account, you can create a property with the hostname of your website where the Stripe Payment Link redirects to after payment and add your api key.</p>

<p><img class="img-responsive img-thumbnail" src="/img/docs/stripe/stripe-app-to-get-checkout-session-data.png" alt="create property in app to interact with stripe checkout session data" /></p>

<h2 id="get-data">Call Server To Get Stripe Checkout Session Data</h2>

<p>Once you create a property in the app, all you need to do is call your property from the host you added like so:</p>

<pre><code class="language-javascript">if ({{Checkout Session ID}}) {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function() {
    
    if (xhr.readyState == XMLHttpRequest.DONE) {
      var json = JSON.parse(xhr.responseText)
      if (json[&quot;customer_email&quot;]) {
        sendConversion(json[&quot;customer_email&quot;]);
      }

    }
  }
  xhr.open('GET', 'https://stripe-attributio.herokuapp.com/checkout/sessions.json?property_id={{Property ID}}&amp;checkout_session_id={{Checkout Session ID}}', true);
  xhr.send(null);
}
</code></pre>

<p>If you make a call to the app from the current host with the proper Property ID and Checkout Session ID, you will get a response from the server with Stripe data that currently is limited to the customer_id and customer_email.</p>

<p>If you need access to additional data, you can make a request and we can add it.</p>

<p>And once you have your data you can send conversion data to your conversion tracking software whatever that may be.</p>

<p>If you need help bringing all of this together, <a href="/meet/">we’re here for that</a>.</p>

                        </div>
                        
                        

                    </div>

                </div>
                

            </div>
            
        </div>
        

        <footer>
</footer>









<div id="copyright">

    <div class="container">

        <div class="col-md-12">
            
            <p class="text-center">Copyright &copy; 2022 Attributio. All rights reserved.</p>
            
        </div>
    </div>
</div>





    </div>
    

    <script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="/js/front.js"></script>


<script src="/js/owl.carousel.min.js"></script>

  </body>
</html>
